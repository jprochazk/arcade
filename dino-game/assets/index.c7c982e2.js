var m=Object.defineProperty;var y=(a,t,e)=>t in a?m(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var n=(a,t,e)=>(y(a,typeof t!="symbol"?t+"":t,e),e);import{n as v}from"./vendor.39d0eea0.js";const x=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const r of i.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&h(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function h(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}};x();const k=(a,t,e)=>a+e*(t-a);class w{constructor(t){this.game=t}update(){}draw(t){}reset(){}}class z extends w{constructor(t){super(t);n(this,"ducking",!1)}update(){this.game.keys.ArrowDown?this.ducking=!0:this.ducking=!1}draw(){const t=this.game.ctx,e=this.game.assets.duck;t.save();const h=Math.sin(Date.now()/250)*5,s=this.ducking?e.size.h/2.5:-e.size.h/2+h;e.draw(t,50,this.game.height()-e.size.h+s,2),t.restore()}reset(){}}class E extends w{constructor(){super(...arguments);n(this,"pos",{prev:this.game.width(),current:this.game.width()});n(this,"speed",15)}update(){this.pos.prev=this.pos.current,this.pos.current-=this.speed,this.pos.current<-this.game.assets.seagull.size.w&&(this.pos.current=this.game.width()+this.game.assets.seagull.size.w,this.pos.prev=this.pos.current)}draw(t){const e=this.game.ctx,h=this.game.assets.seagull;e.save();const s=k(this.pos.prev,this.pos.current,t);h.draw(e,s,this.game.height()-this.game.height()/2.5,1.6),e.restore()}}function d(a){const t=document.createElement("img");return t.src=a,t}function f(a,t,e){a.imageSmoothingEnabled=!1,a.drawImage(t,0,0,t.naturalWidth*e,t.naturalHeight*e)}class g{constructor(t,e){n(this,"sheet");n(this,"current",0);n(this,"frames",[]);n(this,"size");n(this,"delay");n(this,"lastFrame",Date.now());n(this,"loaded",!1);this.sheet=d(t),this.size={w:e.fw,h:e.fh},this.delay=e.delay,this.sheet.onload=()=>{const h=this.sheet.naturalWidth/e.fw,s=this.sheet.naturalHeight/e.fh;for(let i=0;i<s;++i)for(let r=0;r<h;++r){const c=r*e.fw,o=i*e.fh,l=e.fw,p=e.fh;this.frames.push({sx:c,sy:o,sw:l,sh:p})}this.loaded=!0}}draw(t,e,h,s=1){if(!this.loaded)return;const i=Date.now();i-this.lastFrame>this.delay&&(this.lastFrame=i,this.current=(this.current+1)%this.frames.length);const r=this.frames[this.current];t.save(),t.translate(e,h);const[c,o]=[this.size.w*s,this.size.h*s];t.imageSmoothingEnabled=!1,t.drawImage(this.sheet,r.sx,r.sy,r.sw,r.sh,-c/2,-o/2,c,o),t.restore()}}class S{constructor(t){n(this,"entities",[]);n(this,"ctx");n(this,"keys",{});n(this,"assets",{duck:new g("./assets/duck.png",{fw:32,fh:32,delay:150}),seagull:new g("./assets/seagull.png",{fw:64,fh:32,delay:250}),wave:d("./assets/wave.png"),cloud:d("./assets/cloud.png")});n(this,"clearColor","#5581c9");n(this,"playing",!0);this.ctx=document.createElement("canvas").getContext("2d"),this.ctx.canvas.style.width="800px",this.ctx.canvas.style.height="200px",this.ctx.canvas.style.position="relative",this.ctx.canvas.style.left="50%",this.ctx.canvas.style.marginTop="25px",this.ctx.canvas.style.transform="translate(-50%, 0)",t.appendChild(this.ctx.canvas),this.clear(),this.resize(),window.addEventListener("keydown",({code:e})=>this.keys[e]=!0),window.addEventListener("keyup",({code:e})=>this.keys[e]=!1),this.entities.push(new z(this)),this.entities.push(new E(this))}update(){this.entities.forEach(t=>t.update())}draw(t){this.playing||(t=0),this.resize(),this.clear(),this.entities.forEach(e=>e.draw(t)),this.drawEnvironment()}drawEnvironment(){const t=this.ctx,e=Date.now()/5;{const s=(this.assets.wave.width||1)*3,i=(this.assets.wave.height||1)*3,r=Math.ceil(this.width()/s)+1,c=s-e%s;for(let o=0;o<r;++o)t.save(),t.translate(c+o*s-s,this.height()-i),t.globalAlpha=.8,f(t,this.assets.wave,3),t.restore()}{const s=(this.assets.cloud.width||1)*3*2,i=(this.assets.cloud.width||1)*3,r=(this.assets.cloud.height||1)*3,c=Math.ceil(this.width()/(s+i))+1,o=s+i-e%(s+i);for(let l=0;l<c;++l)t.save(),t.translate(o+l*(s+i)-(s+i),r/12),f(t,this.assets.cloud,3),t.restore()}}reset(){}width(){return this.ctx.canvas.width}height(){return this.ctx.canvas.height}resize(){const t=this.ctx.canvas;(t.clientWidth!==t.width||t.clientHeight!==t.height)&&(t.width=t.clientWidth,t.height=t.clientHeight)}clear(){const t=this.ctx,e=t.fillStyle;t.fillStyle=this.clearColor,t.fillRect(0,0,t.canvas.width,t.canvas.height),t.fillStyle=e}}const L=document.querySelector("#app"),u=new S(L);window._game=u;v(30,()=>{u.update()},a=>{u.draw(a)});
